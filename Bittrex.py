import math
import time
import re
from bs4 import BeautifulSoup
import requests
import json
from selenium import webdriver
import ccxt

class bittrex (ccxt.bittrex):

    def __init__(self):
        super().__init__()
        self.childMarkets = {}
        self.has['deposit'] = True
        self.fees['funding']['withdraw'] = {
            'BTC': 0.001,
            'LTC': 0.01,
            'DOGE': 2.0,
            'VTC': 0.02,
            'PPC': 0.02,
            'FTC': 0.2,
            'RDD': 2.0,
            'NXT': 2.0,
            'DASH': 0.002,
            'POT': 0.002,
            'BLK': 0.02,
            'EMC2': 0.2,
            'XMY': 0.2,
            'AUR': 0.002,
            'UTC': 0.02,
            'MZC': 0.2,
            'EFL': 0.2,
            'GLD': 0.0002,
            'FAIR': 0.02,
            'SLR': 0.2,
            'PTC': 0.002,
            'GRS': 0.2,
            'NLG': 0.2,
            'RBY': 0.02,
            'XWC': 0.2,
            'MONA': 0.2,
            'BITS': 0.002,
            'OC': 0.2,
            'THC': 0.2,
            'ENRG': 0.2,
            'SFR': 0.2,
            'ERC': 0.2,
            'NAUT': 2.0,
            'VRC': 0.0002,
            'CURE': 0.0002,
            'BLC': 0.2,
            'XC': 2e-05,
            'XDQ': 0.02,
            'XBB': 0.0002,
            'HYPER': 0.02,
            'CCN': 0.02,
            'XMR': 0.04,
            'CLOAK': 0.02,
            'BSD': 0.002,
            'CRYPT': 0.02,
            'START': 0.02,
            'KORE': 0.02,
            'XDN': 0.01,
            'TRK': 0.02,
            'TRUST': 0.02,
            'NAV': 0.2,
            'XST': 0.02,
            'APEX': 0.02,
            'BTCD': 0.02,
            'VIA': 0.2,
            'TRI': 0.0002,
            'UNO': 0.0002,
            'PINK': 0.2,
            'IOC': 0.2,
            'MAX': 0.2,
            'LXC': 0.02,
            'BOB': 0.02,
            'CANN': 0.2,
            'FC2': 0.02,
            'SSD': 0.02,
            'J': 0.02,
            'SYS': 0.0002,
            'NEOS': 0.02,
            'DGB': 0.2,
            'ROOT': 0.2,
            'BTS': 5.0,
            'BURST': 2.0,
            'TIT': 0.2,
            'BSTY': 0.2,
            'PXI': 0.2,
            'DGC': 0.2,
            'SLG': 0.2,
            'STV': 0.2,
            'EXCL': 0.2,
            'SWIFT': 2.0,
            'NET': 0.2,
            'GHC': 0.2,
            'DOPE': 0.002,
            'BLOCK': 0.02,
            'ABY': 0.2,
            'VIOR': 0.2,
            'BYC': 0.02,
            'UFO': 0.2,
            'XMG': 0.0002,
            'XQN': 0.02,
            'BLITZ': 0.02,
            'VPN': 0.2,
            'BAY': 0.2,
            'DTC': 0.2,
            'AM': 0.2,
            'METAL': 20.0,
            'SPR': 0.2,
            'VTR': 0.02,
            'XPY': 0.002,
            'XRP': 1.0,
            'GAME': 0.2,
            'GP': 0.2,
            'NXS': 0.2,
            'COVAL': 200.0,
            'FSC2': 0.2,
            'SOON': 0.2,
            'HZ': 2.0,
            'XCP': 0.2,
            'BITB': 0.2,
            'XTC': 100.0,
            'XVG': 0.2,
            'GEO': 0.1,
            'FLDC': 150.0,
            'GEMZ': 5.0,
            'GRC': 0.2,
            'XCO': 0.02,
            'MTR': 0.2,
            'FLO': 0.2,
            'U': 0.2,
            'NBT': 0.02,
            'XEM': 4.0,
            'MUE': 0.02,
            'XVC': 0.002,
            '8BIT': 0.002,
            'CLAM': 0.2,
            'XSEED': 0.002,
            'NTRN': 0.02,
            'SLING': 0.002,
            'DMD': 0.002,
            'GAM': 0.3,
            'UNIT': 2.0,
            'GRT': 20.0,
            'VIRAL': 0.002,
            'SPHR': 0.002,
            'ARB': 0.02,
            'OK': 0.2,
            'ADC': 2.0,
            'SNRG': 0.002,
            'PKB': 0.02,
            'TES': 0.2,
            'CPC': 0.2,
            'AEON': 0.1,
            'BITZ': 0.02,
            'ETH': 0.006,
            'GCR': 0.02,
            'TX': 0.02,
            'BCY': 5.0,
            'PRIME': 0.02,
            'EXP': 0.01,
            'NEU': 0.02,
            'SWING': 0.1,
            'INFX': 0.1,
            'OMNI': 0.1,
            'USDT': 25.0,
            'AMP': 5.0,
            'AGRS': 5.0,
            'XLM': 0.01,
            'SPRTS': 1.0,
            'YBC': 1.0,
            'BTA': 1.0,
            'MEC': 1.0,
            'BITCNY': 1.5,
            'AMS': 1.0,
            'SCRT': 1.0,
            'SCOT': 5.0,
            'CLUB': 0.02,
            'VOX': 0.1,
            'MND': 1.0,
            'EMC': 0.02,
            'FCT': 0.01,
            'MAID': 2.0,
            'FRK': 0.002,
            'EGC': 0.2,
            'SLS': 0.002,
            'ORB': 0.2,
            'STEPS': 0.2,
            'RADS': 0.2,
            'DCR': 0.1,
            'SAFEX': 100.0,
            'PIVX': 0.02,
            'WARP': 0.02,
            'CRBIT': 1.0,
            'MEME': 0.02,
            'STEEM': 0.01,
            '2GIVE': 0.01,
            'LSK': 0.1,
            'KR': 0.01,
            'PDC': 5.0,
            'DGD': 0.038,
            'BRK': 0.02,
            'WAVES': 0.001,
            'RISE': 0.1,
            'LBC': 0.02,
            'SBD': 0.01,
            'BRX': 0.02,
            'DRACO': 2.0,
            'ETC': 0.01,
            'UNIQ': 0.1,
            'STRAT': 0.2,
            'UNB': 0.2,
            'SYNX': 0.2,
            'TRIG': 5.0,
            'EBST': 0.1,
            'VRM': 0.4,
            'XAUR': 2.5,
            'SEQ': 0.2,
            'SNGLS': 3.5,
            'REP': 0.1,
            'SHIFT': 0.01,
            'ARDR': 2.0,
            'XZC': 0.02,
            'NEO': 0.025,
            'ZEC': 0.005,
            'ZCL': 0.002,
            'IOP': 0.2,
            'DAR': 0.1,
            'GOLOS': 0.01,
            'GBG': 0.01,
            'UBQ': 0.01,
            'HKG': 0.1,
            'KMD': 0.002,
            'SIB': 0.2,
            'ION': 0.2,
            'LMC': 0.2,
            'QWARK': 0.1,
            'CRW': 0.02,
            'SWT': 1.8,
            'TIME': 0.2,
            'MLN': 0.035,
            'TKS': 0.1,
            'ARK': 0.1,
            'DYN': 0.02,
            'MUSIC': 0.01,
            'DTB': 5.0,
            'INCNT': 0.1,
            'GBYTE': 0.002,
            'GNT': 9.0,
            'NXC': 13.0,
            'EDG': 3.5,
            'LGD': 4.0,
            'TRST': 7.0,
            'WINGS': 4.0,
            'RLC': 3.5,
            'GNO': 0.02,
            'GUP': 7.0,
            'LUN': 0.15,
            'APX': 0.1,
            'TKN': 0.4,
            'HMQ': 16.0,
            'ANT': 1.3,
            'ZEN': 0.002,
            'SC': 0.1,
            'BAT': 10.0,
            '1ST': 4.5,
            'QRL': 2.5,
            'CRB': 8.0,
            'PTOY': 14.0,
            'MYST': 2.5,
            'CFI': 27.0,
            'BNT': 0.85,
            'NMR': 0.15,
            'SNT': 20.0,
            'DCT': 0.1,
            'XEL': 0.2,
            'MCO': 0.5,
            'ADT': 43.0,
            'FUN': 49.0,
            'PAY': 2.0,
            'MTL': 1.35,
            'STORJ': 3.0,
            'ADX': 3.0,
            'OMG': 0.35,
            'CVC': 8.0,
            'PART': 0.1,
            'QTUM': 0.01,
            'BCC': 0.001,
            'DNT': 29.0,
            'ADA': 0.2,
            'MANA': 36.0,
            'SALT': 0.6,
            'TIX': 5.0,
            'RCN': 16.0,
            'VIB': 13.0,
            'MER': 0.1,
            'POWR': 5.0,
            'BTG': 0.001,
            'ENG': 1.0,
            'UKG': 5.0,
            'IGNIS': 2.0,
            'SRN': 1.0}


    def updateMarkets(self):
        marketsJson = self.fetch_tickers()
        for market in marketsJson:
            market = marketsJson[market]['info']
            self.childMarkets[market['MarketName']] = {
                'bid': float(market['Bid']),
                'ask': float(market['Ask'])}

    def getSymbolMarket(self,symbol,base):
        try:
            return self.childMarkets[base + "-" + symbol]
        except:
            return None

    def isSybmolInMarket(self, symbol, base):
        try:
            self.childMarkets[base + "-" + symbol]
            return True
        except:
            return False